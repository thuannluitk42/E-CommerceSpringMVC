<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="admin/fragments.html :: html_head" >
<style type="text/css">

.activePageNumber {
color: #0d6efd;
}
.disablePageNumber {
color: black !important;
}
</style>

</head>

    <body>
    
		<!-- Navbar Start -->
		<nav th:replace="/admin/fragments.html :: menubar_navs"></nav>
		<!-- Navbar End -->
		
        <div id="layoutSidenav">
        
			<!-- sidenav_nav Start -->
			<div th:replace="/admin/fragments.html :: sidenav_nav"></div>
			<!-- sidenav_nav End -->
		
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">Quản lí tài khoản</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a th:href="@{/admin/manage}" style="text-decoration: none;">Trang chủ</a></li>
                            <li class="breadcrumb-item">Quản lí tài khoản</li>
                        </ol>
                        <div class="card mb-4"> 	
							<table class="table table-striped table-bordered ">
							    <tr style="text-align: center;">
							        <th>User</th>
							        <th>Ngày tạo</th>
							        <th>Trạng thái</th>
							        <th>Email</th>
							        <th>Hành động</th>
							    </tr>
							    <tr th:if="${#lists.isEmpty(userList)}">
							        <td class="text-center" colspan="7">Không có người dùng nào được tìm thấy... </td>
							    </tr>
							    <tr th:each="user : ${userList}">
	<!-- 								<td> 
										<img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt=""> 
										<a href="#" class="user-link">Mila Kunis</a> 
										<span class="user-subhead">Admin</span>
									</td>
							        <td class="align-middle" th:text="${user.firstName}"></td>
							        <td class="align-middle" th:text="${user.lastName}"></td>
							        <td class="align-middle" th:text="${user.role}"></td>
							        <td class="align-middle" th:text="${user.createdAt}"></td>
							        <td class="align-middle" th:text="${user.updatedAt}"></td>
							        <td class="align-middle text-center"><a class="btn btn-secondary" th:href="'/' + ${user.id}">✏</a></td> -->
									<td class="text-center"> 
										<img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="" style="width: 50px"> 
										<div style= "display: inline-block;vertical-align: middle;">
											<a th:href="@{/admin/detail_user(user_id=${user.userId})}" 
											   class="user-link" 
											   th:text="${user.username}"></a>
											<p th:text="${user.roleName}"></p>
										</div>
									</td>
									<td class="text-center" th:text="${user.createdAt}"></td>
									<td class="text-center"> 
										<span th:if="${user.status}" class="card bg-success text-white mb-4" style="width: 60%;">Đã kích hoạt</span>
										<span th:unless="${user.status}" class="card bg-danger text-white mb-4" style="width: 60%;">Chưa kích hoạt</span>
									</td>
									<td class="text-center"><p th:text="${user.email}"></p></td>
									<td style="width: 20%;" class="text-center"> 
										<a  th:href="@{/admin/detail_user(user_id=${user.userId})}" class="table-link"> 
											<span class="fa-stack"> <i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-pencil fa-stack-1x fa-inverse"></i> </span> 
										</a> 
										<a th:href="@{/admin/delete_user(user_id=${user.userId})}" class="table-link danger"> 
											<span class="fa-stack"> <i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-trash-o fa-stack-1x fa-inverse"></i> </span> 
										</a>
									</td>
							    </tr>
							</table>
							
							<div th:if="${totalPages > 1}">
								<nav aria-label="Page navigation">
								  <ul class="pagination justify-content-center">
									<li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
										<a class="page-link" th:href="@{/admin/manage_user/(size=${usersPage.size}, page=${1})}">First</a>
									</li>
									<li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
										<a class="page-link" th:href="@{/admin/manage_user/(size=${usersPage.size}, page=${currentPage - 1})}"><span aria-hidden="true">&laquo;</span></a>
									</li>
									<li th:class="${currentPage != i ? 'page-item': 'page-item disabled'}" th:each="pageNumber : ${pageNumbers}" style="border: 1px solid lightgrey;width: 35px;text-align: center">
										<a class="page-link" style="text-decoration: none;"
										   th:href="@{/admin/manage_user/(size=${usersPage.size}, page=${pageNumber})}" 
										   th:text=${pageNumber}
										   th:class="${pageNumber==usersPage.number + 1} ? active : disablePageNumber">
										 </a>
									</li>
									<li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
										<a class="page-link" th:href="@{/admin/manage_user/(size=${usersPage.size}, page=${currentPage + 1})}">&raquo;</a>
									</li>
									<li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
										<a class="page-link" th:href="@{/admin/manage_user/(size=${usersPage.size}, page=${totalPages})}">Last</a>
									</li>
								  </ul>
								</nav>
							</div>

                        </div>
                    </div>
                </main>
			    <!-- Footer Start -->
				<div th:replace="/admin/fragments.html :: footer"></div>
			    <!-- Footer End -->
            </div>
        </div>
    </body>
</html>
